{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=()=>{const[cartItems,setCartItems]=useState([]);const[total,setTotal]=useState(0);const[shippingAddress,setShippingAddress]=useState('');const navigate=useNavigate();useEffect(()=>{fetchCart();},[]);const fetchCart=async()=>{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}try{const response=await axios.get('http://localhost:8000/api/cart.php',{headers:{Authorization:\"Bearer \".concat(token)}});setCartItems(response.data);calculateTotal(response.data);}catch(error){console.error('Error fetching cart:',error);}};const calculateTotal=items=>{const sum=items.reduce((acc,item)=>acc+item.price*item.quantity,0);setTotal(sum);};const handleSubmit=async e=>{e.preventDefault();const token=localStorage.getItem('token');try{await axios.post('http://localhost:8000/api/orders.php',{shipping_address:shippingAddress},{headers:{Authorization:\"Bearer \".concat(token)}});alert('Order placed successfully!');navigate('/orders');}catch(error){alert('Failed to place order');}};if(cartItems.length===0){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',margin:'50px'},children:\"Your cart is empty\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'20px auto',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"}),cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.name,\" x \",item.quantity]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",(item.price*item.quantity).toFixed(2)]})]},item.product_id)),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',fontWeight:'bold'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",total.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping Information\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Shipping Address:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:shippingAddress,onChange:e=>setShippingAddress(e.target.value),required:true,style:{width:'100%',padding:'8px',marginTop:'5px',minHeight:'100px'}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'100%',padding:'10px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Place Order\"})]})]})]})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Checkout","cartItems","setCartItems","total","setTotal","shippingAddress","setShippingAddress","navigate","fetchCart","token","localStorage","getItem","response","get","headers","Authorization","concat","data","calculateTotal","error","console","items","sum","reduce","acc","item","price","quantity","handleSubmit","e","preventDefault","post","shipping_address","alert","length","style","textAlign","margin","children","maxWidth","padding","display","gap","flex","map","justifyContent","marginBottom","name","toFixed","product_id","fontWeight","onSubmit","value","onChange","target","required","width","marginTop","minHeight","type","backgroundColor","color","border","borderRadius","cursor"],"sources":["C:/xampp/htdocs/code/shop/frontend/src/components/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst Checkout = () => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [shippingAddress, setShippingAddress] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get('http://localhost:8000/api/cart.php', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setCartItems(response.data);\r\n      calculateTotal(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching cart:', error);\r\n    }\r\n  };\r\n\r\n  const calculateTotal = (items) => {\r\n    const sum = items.reduce((acc, item) => acc + (item.price * item.quantity), 0);\r\n    setTotal(sum);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem('token');\r\n\r\n    try {\r\n      await axios.post('http://localhost:8000/api/orders.php', {\r\n        shipping_address: shippingAddress\r\n      }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      alert('Order placed successfully!');\r\n      navigate('/orders');\r\n    } catch (error) {\r\n      alert('Failed to place order');\r\n    }\r\n  };\r\n\r\n  if (cartItems.length === 0) {\r\n    return <div style={{ textAlign: 'center', margin: '50px' }}>Your cart is empty</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: '800px', margin: '20px auto', padding: '20px' }}>\r\n      <h1>Checkout</h1>\r\n      <div style={{ display: 'flex', gap: '20px' }}>\r\n        <div style={{ flex: 1 }}>\r\n          <h2>Order Summary</h2>\r\n          {cartItems.map(item => (\r\n            <div key={item.product_id} style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n              <span>{item.name} x {item.quantity}</span>\r\n              <span>${(item.price * item.quantity).toFixed(2)}</span>\r\n            </div>\r\n          ))}\r\n          <hr />\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', fontWeight: 'bold' }}>\r\n            <span>Total:</span>\r\n            <span>${total.toFixed(2)}</span>\r\n          </div>\r\n        </div>\r\n        <div style={{ flex: 1 }}>\r\n          <h2>Shipping Information</h2>\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={{ marginBottom: '15px' }}>\r\n              <label>Shipping Address:</label>\r\n              <textarea\r\n                value={shippingAddress}\r\n                onChange={(e) => setShippingAddress(e.target.value)}\r\n                required\r\n                style={{ width: '100%', padding: '8px', marginTop: '5px', minHeight: '100px' }}\r\n              />\r\n            </div>\r\n            <button type=\"submit\" style={{ width: '100%', padding: '10px', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\r\n              Place Order\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACa,eAAe,CAAEC,kBAAkB,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAAAe,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACde,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACVF,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CAEA,GAAI,CACF,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,CAAC,oCAAoC,CAAE,CACrEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAC9C,CAAC,CAAC,CACFP,YAAY,CAACU,QAAQ,CAACK,IAAI,CAAC,CAC3BC,cAAc,CAACN,QAAQ,CAACK,IAAI,CAAC,CAC/B,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAD,cAAc,CAAIG,KAAK,EAAK,CAChC,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAKD,GAAG,CAAIC,IAAI,CAACC,KAAK,CAAGD,IAAI,CAACE,QAAS,CAAE,CAAC,CAAC,CAC9EvB,QAAQ,CAACkB,GAAG,CAAC,CACf,CAAC,CAED,KAAM,CAAAM,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAArB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CACF,KAAM,CAAAhB,KAAK,CAACoC,IAAI,CAAC,sCAAsC,CAAE,CACvDC,gBAAgB,CAAE3B,eACpB,CAAC,CAAE,CACDS,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAC9C,CAAC,CAAC,CACFwB,KAAK,CAAC,4BAA4B,CAAC,CACnC1B,QAAQ,CAAC,SAAS,CAAC,CACrB,CAAE,MAAOY,KAAK,CAAE,CACdc,KAAK,CAAC,uBAAuB,CAAC,CAChC,CACF,CAAC,CAED,GAAIhC,SAAS,CAACiC,MAAM,GAAK,CAAC,CAAE,CAC1B,mBAAOrC,IAAA,QAAKsC,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAAC,QAAA,CAAC,oBAAkB,CAAK,CAAC,CACtF,CAEA,mBACEvC,KAAA,QAAKoC,KAAK,CAAE,CAAEI,QAAQ,CAAE,OAAO,CAAEF,MAAM,CAAE,WAAW,CAAEG,OAAO,CAAE,MAAO,CAAE,CAAAF,QAAA,eACtEzC,IAAA,OAAAyC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBvC,KAAA,QAAKoC,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAJ,QAAA,eAC3CvC,KAAA,QAAKoC,KAAK,CAAE,CAAEQ,IAAI,CAAE,CAAE,CAAE,CAAAL,QAAA,eACtBzC,IAAA,OAAAyC,QAAA,CAAI,eAAa,CAAI,CAAC,CACrBrC,SAAS,CAAC2C,GAAG,CAACnB,IAAI,eACjB1B,KAAA,QAA2BoC,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAM,CAAEI,cAAc,CAAE,eAAe,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAR,QAAA,eAC3GvC,KAAA,SAAAuC,QAAA,EAAOb,IAAI,CAACsB,IAAI,CAAC,KAAG,CAACtB,IAAI,CAACE,QAAQ,EAAO,CAAC,cAC1C5B,KAAA,SAAAuC,QAAA,EAAM,GAAC,CAAC,CAACb,IAAI,CAACC,KAAK,CAAGD,IAAI,CAACE,QAAQ,EAAEqB,OAAO,CAAC,CAAC,CAAC,EAAO,CAAC,GAF/CvB,IAAI,CAACwB,UAGV,CACN,CAAC,cACFpD,IAAA,QAAK,CAAC,cACNE,KAAA,QAAKoC,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAM,CAAEI,cAAc,CAAE,eAAe,CAAEK,UAAU,CAAE,MAAO,CAAE,CAAAZ,QAAA,eACnFzC,IAAA,SAAAyC,QAAA,CAAM,QAAM,CAAM,CAAC,cACnBvC,KAAA,SAAAuC,QAAA,EAAM,GAAC,CAACnC,KAAK,CAAC6C,OAAO,CAAC,CAAC,CAAC,EAAO,CAAC,EAC7B,CAAC,EACH,CAAC,cACNjD,KAAA,QAAKoC,KAAK,CAAE,CAAEQ,IAAI,CAAE,CAAE,CAAE,CAAAL,QAAA,eACtBzC,IAAA,OAAAyC,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BvC,KAAA,SAAMoD,QAAQ,CAAEvB,YAAa,CAAAU,QAAA,eAC3BvC,KAAA,QAAKoC,KAAK,CAAE,CAAEW,YAAY,CAAE,MAAO,CAAE,CAAAR,QAAA,eACnCzC,IAAA,UAAAyC,QAAA,CAAO,mBAAiB,CAAO,CAAC,cAChCzC,IAAA,aACEuD,KAAK,CAAE/C,eAAgB,CACvBgD,QAAQ,CAAGxB,CAAC,EAAKvB,kBAAkB,CAACuB,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAE,CACpDG,QAAQ,MACRpB,KAAK,CAAE,CAAEqB,KAAK,CAAE,MAAM,CAAEhB,OAAO,CAAE,KAAK,CAAEiB,SAAS,CAAE,KAAK,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAChF,CAAC,EACC,CAAC,cACN7D,IAAA,WAAQ8D,IAAI,CAAC,QAAQ,CAACxB,KAAK,CAAE,CAAEqB,KAAK,CAAE,MAAM,CAAEhB,OAAO,CAAE,MAAM,CAAEoB,eAAe,CAAE,SAAS,CAAEC,KAAK,CAAE,OAAO,CAAEC,MAAM,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAK,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,CAAC,aAErK,CAAQ,CAAC,EACL,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}