{"ast":null,"code":"import React,{useState,useCallback,useMemo}from'react';import{Link}from'react-router-dom';import{ShoppingCart,Favorite,FavoriteBorder}from'@mui/icons-material';import{IconButton,Chip}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCard=_ref=>{let{product,onAddToCart}=_ref;const[isFavorite,setIsFavorite]=useState(false);const[imageLoaded,setImageLoaded]=useState(false);const[imageError,setImageError]=useState(false);// Memoize image source to prevent unnecessary re-renders\nconst imageSrc=useMemo(()=>{return product.image_url||'/placeholder-product.jpg';},[product.image_url]);const handleImageLoad=useCallback(()=>{setImageLoaded(true);setImageError(false);},[]);const handleImageError=useCallback(()=>{setImageError(true);setImageLoaded(true);},[]);const handleAddToCart=useCallback(e=>{e.preventDefault();e.stopPropagation();if(onAddToCart){onAddToCart(product);}},[onAddToCart,product]);const toggleFavorite=useCallback(e=>{e.preventDefault();e.stopPropagation();setIsFavorite(!isFavorite);},[isFavorite]);return/*#__PURE__*/_jsx(\"div\",{className:\"card group overflow-hidden\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.id),className:\"block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"aspect-square bg-gray-100 relative\",children:[!imageLoaded&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"img\",{src:imageSrc,alt:product.name,className:\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105 \".concat(imageLoaded?'opacity-100':'opacity-0'),onLoad:handleImageLoad,onError:handleImageError,loading:\"lazy\",decoding:\"async\"}),product.stock<=0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-2\",children:/*#__PURE__*/_jsx(Chip,{label:\"Out of Stock\",color:\"error\",size:\"small\",className:\"bg-red-500 text-white\"})}),product.stock>0&&product.stock<=5&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-2\",children:/*#__PURE__*/_jsx(Chip,{label:\"Low Stock\",color:\"warning\",size:\"small\",className:\"bg-orange-500 text-white\"})}),/*#__PURE__*/_jsx(IconButton,{className:\"absolute top-2 right-2 bg-white hover:bg-gray-50 shadow-md\",size:\"small\",onClick:toggleFavorite,children:isFavorite?/*#__PURE__*/_jsx(Favorite,{className:\"text-red-500\"}):/*#__PURE__*/_jsx(FavoriteBorder,{className:\"text-gray-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center\",children:/*#__PURE__*/_jsx(IconButton,{className:\"bg-primary-500 hover:bg-primary-600 text-white opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300\",onClick:handleAddToCart,disabled:product.stock<=0,children:/*#__PURE__*/_jsx(ShoppingCart,{})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-1 group-hover:text-primary-600 transition-colors overflow-hidden\",style:{display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical',lineHeight:'1.4em',maxHeight:'2.8em'},children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2 overflow-hidden\",style:{display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical',lineHeight:'1.3em',maxHeight:'2.6em'},children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-primary-600\",children:[\"$\",product.price]}),product.original_price&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500 line-through\",children:[\"$\",product.original_price]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:product.stock>0?\"\".concat(product.stock,\" left\"):'Sold out'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex text-yellow-400\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:i<Math.floor(product.rating||4)?'★':'☆'},i))}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500 ml-1\",children:[\"(\",product.reviews||0,\")\"]})]})]})]})})});};export default ProductCard;","map":{"version":3,"names":["React","useState","useCallback","useMemo","Link","ShoppingCart","Favorite","FavoriteBorder","IconButton","Chip","jsx","_jsx","jsxs","_jsxs","ProductCard","_ref","product","onAddToCart","isFavorite","setIsFavorite","imageLoaded","setImageLoaded","imageError","setImageError","imageSrc","image_url","handleImageLoad","handleImageError","handleAddToCart","e","preventDefault","stopPropagation","toggleFavorite","className","children","to","concat","id","src","alt","name","onLoad","onError","loading","decoding","stock","label","color","size","onClick","disabled","style","display","WebkitLineClamp","WebkitBoxOrient","lineHeight","maxHeight","description","price","original_price","Array","map","_","i","Math","floor","rating","reviews"],"sources":["C:/xampp/htdocs/code/shop/frontend/src/components/ui/ProductCard.js"],"sourcesContent":["import React, { useState, useCallback, useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ShoppingCart, Favorite, FavoriteBorder } from '@mui/icons-material';\r\nimport { IconButton, Chip } from '@mui/material';\r\n\r\nconst ProductCard = ({ product, onAddToCart }) => {\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  const [imageError, setImageError] = useState(false);\r\n\r\n  // Memoize image source to prevent unnecessary re-renders\r\n  const imageSrc = useMemo(() => {\r\n    return product.image_url || '/placeholder-product.jpg';\r\n  }, [product.image_url]);\r\n\r\n  const handleImageLoad = useCallback(() => {\r\n    setImageLoaded(true);\r\n    setImageError(false);\r\n  }, []);\r\n\r\n  const handleImageError = useCallback(() => {\r\n    setImageError(true);\r\n    setImageLoaded(true);\r\n  }, []);\r\n\r\n  const handleAddToCart = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (onAddToCart) {\r\n      onAddToCart(product);\r\n    }\r\n  }, [onAddToCart, product]);\r\n\r\n  const toggleFavorite = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsFavorite(!isFavorite);\r\n  }, [isFavorite]);\r\n\r\n  return (\r\n    <div className=\"card group overflow-hidden\">\r\n      <Link to={`/product/${product.id}`} className=\"block\">\r\n        <div className=\"relative overflow-hidden\">\r\n          {/* Product Image */}\r\n          <div className=\"aspect-square bg-gray-100 relative\">\r\n            {!imageLoaded && (\r\n              <div className=\"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center\">\r\n                <div className=\"w-12 h-12 bg-gray-300 rounded\"></div>\r\n              </div>\r\n            )}\r\n            <img\r\n              src={imageSrc}\r\n              alt={product.name}\r\n              className={`w-full h-full object-cover transition-transform duration-300 group-hover:scale-105 ${\r\n                imageLoaded ? 'opacity-100' : 'opacity-0'\r\n              }`}\r\n              onLoad={handleImageLoad}\r\n              onError={handleImageError}\r\n              loading=\"lazy\"\r\n              decoding=\"async\"\r\n            />\r\n\r\n            {/* Stock Status */}\r\n            {product.stock <= 0 && (\r\n              <div className=\"absolute top-2 left-2\">\r\n                <Chip\r\n                  label=\"Out of Stock\"\r\n                  color=\"error\"\r\n                  size=\"small\"\r\n                  className=\"bg-red-500 text-white\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {product.stock > 0 && product.stock <= 5 && (\r\n              <div className=\"absolute top-2 left-2\">\r\n                <Chip\r\n                  label=\"Low Stock\"\r\n                  color=\"warning\"\r\n                  size=\"small\"\r\n                  className=\"bg-orange-500 text-white\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Favorite Button */}\r\n            <IconButton\r\n              className=\"absolute top-2 right-2 bg-white hover:bg-gray-50 shadow-md\"\r\n              size=\"small\"\r\n              onClick={toggleFavorite}\r\n            >\r\n              {isFavorite ? (\r\n                <Favorite className=\"text-red-500\" />\r\n              ) : (\r\n                <FavoriteBorder className=\"text-gray-600\" />\r\n              )}\r\n            </IconButton>\r\n\r\n            {/* Quick Add to Cart Overlay */}\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center\">\r\n              <IconButton\r\n                className=\"bg-primary-500 hover:bg-primary-600 text-white opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300\"\r\n                onClick={handleAddToCart}\r\n                disabled={product.stock <= 0}\r\n              >\r\n                <ShoppingCart />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Product Info */}\r\n          <div className=\"p-4\">\r\n            <h3 className=\"font-semibold text-gray-900 mb-1 group-hover:text-primary-600 transition-colors overflow-hidden\"\r\n                style={{\r\n                  display: '-webkit-box',\r\n                  WebkitLineClamp: 2,\r\n                  WebkitBoxOrient: 'vertical',\r\n                  lineHeight: '1.4em',\r\n                  maxHeight: '2.8em'\r\n                }}>\r\n              {product.name}\r\n            </h3>\r\n\r\n            <p className=\"text-gray-600 text-sm mb-2 overflow-hidden\"\r\n               style={{\r\n                 display: '-webkit-box',\r\n                 WebkitLineClamp: 2,\r\n                 WebkitBoxOrient: 'vertical',\r\n                 lineHeight: '1.3em',\r\n                 maxHeight: '2.6em'\r\n               }}>\r\n              {product.description}\r\n            </p>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <span className=\"text-lg font-bold text-primary-600\">\r\n                  ${product.price}\r\n                </span>\r\n                {product.original_price && (\r\n                  <span className=\"text-sm text-gray-500 line-through\">\r\n                    ${product.original_price}\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"text-sm text-gray-500\">\r\n                {product.stock > 0 ? `${product.stock} left` : 'Sold out'}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Rating */}\r\n            <div className=\"flex items-center mt-2\">\r\n              <div className=\"flex text-yellow-400\">\r\n                {[...Array(5)].map((_, i) => (\r\n                  <span key={i} className=\"text-sm\">\r\n                    {i < Math.floor(product.rating || 4) ? '★' : '☆'}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <span className=\"text-sm text-gray-500 ml-1\">\r\n                ({product.reviews || 0})\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}